<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="feed" href="/feeds/all.atom.xml" title="Articles">

    <title>Jupyterhub backed by Carina! - Tim Head</title>


    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="/theme/css/bootstrap.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/default.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-49540142-1', 'betatim.github.io');
      ga('send', 'pageview');
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript" src="/interactive/main-built.js" charset="utf-8"></script>
    <script>
      $(function(){
	      new Thebe({url:"https://tmpnb.org/",
		      kernel_name: "python3",
		      //container_selector: "div[entry-content]"});
		      container_selector: "article"});
      });
    </script>

    <!-- extra stuff for nbconvert -->
    <!-- extra stuff for nbconvert -->

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/javascript">
      init_mathjax = function() {
      if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
        },
        displayAlign: 'left', // Change this to 'center' to center equations.
        "HTML-CSS": {
          styles: {'.MathJax_Display': {"margin": 0}}
        }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
      }
      }
      init_mathjax();
    </script>

    <link href='https://fonts.googleapis.com/css?family=Roboto:400,400italic,700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

    <style>
      .cell {
      margin-top: 22px;
      margin-bottom: 11px;
      }
      .text_cell_render {
      padding: 0;
      }
      .title {
      border-left: 7px solid #eee;
      padding: 10px 10px 10px 23px;
      margin-left: -30px;
      }
      .when {
      padding-top: 5px;
      text-transform: uppercase;
      color: #777;
      }
      .entry-content img {
      border-radius: 4px;
      }
      .navbar {
      margin: 75px 0 25px 0;
      }
      .footer {
      margin: 100px 0 25px 0;
      border-top: 1px solid transparent;
      border-color: #eee;
      }
      .powered-by {
      padding: 15px;
      float: right;
      }
      .social {
      padding: 15px;
      float: left;
      }
      .social i {
      padding-left: 15px;
      }
      .social a {
      color: black;
      transition: all 0.25s ease-in;
      -webkit-transition: all 0.25s ease-in;
      }
      .social a:hover {
      text-shadow: 0 0 15px #000;
      }
      .listing span {
      float: right;
      text-transform: uppercase;
      }
      .listing li {
      list-style-type: none;
      }
      .navbar a {
      transition: color 0.5s ease-in;
      -webkit-transition: color 0.5s ease-in;
      }
      .navbar li a {
      font-weight: bold;
      }
      .navbar a {
      text-transform: uppercase
      }
      div.prompt {
      display: none;
      }
    </style>

  </head>
  <body>
    <div class="container">
      <div class="row">
	<div class="col-md-8 col-md-offset-2">
	  <nav class="navbar navbar-default" role="navigation">
	    
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		<span class="sr-only">Toggle navigation</span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand name" href="http://betatim.github.io/">Tim<b>Head</b></a>
	    </div>
	    <div class="collapse navbar-collapse navbar-right">
	      <ul class="nav navbar-nav">
		<!-- <li><a href="#">Notes</a></li> -->
		<!-- <li><a href="#">Talks</a></li> -->
                         <li><a href="/pages/about.html">
                             About
                         </a></li>
                         <li><a href="/pages/science.html">
                             Science
                         </a></li>
                         <li><a href="/pages/sports.html">
                             Sports
                         </a></li>
	      </ul>
	    </div>
	    
	  </nav>  
	</div>
      </div>
    </div>
    
    <div class="container">
      <div class="col-md-8 col-md-offset-2">
    <section id="content">
        <article>
            <header class="title">
                <h1>
                    <!--<a href="http://betatim.github.io/posts/jupyterhub-carina/"
                       rel="bookmark"
                       title="Permalink to Jupyterhub backed by Carina!">
                        Jupyterhub backed by Carina!
                    </a>-->
		    Jupyterhub backed by Carina!
                </h1>
		<div class="when">25 November 2015</div>
            </header>
            <div class="entry-content">
                <p>This post explains how you can setup <a href="//github.com/jupyter/jupyterhub">jupyterhub</a> to serve notebooks
from a computer owned by your visitors. Sounds confusing? Bare with
me.</p>
<p>In a traditional setup the person hosting the jupyterhub instance has
to provide the compute power for all users. This means you have to have
enough resources for that <a href="http://norvig.com/">Peter Norvig</a> moment, when
a large number of users suddenly wants to execute Norvig's latest notebook.</p>
<p>However jupyterhub is extremely modular, so I wrote a replacement for
the authentication and process spawning parts that allow jupyterhub to
launch the notebooks on computing resources owned by the visitor. If every
user brings their own resources, you can never run out. Perfect scalability!</p>
<h2>The Code</h2>
<p>If you know about <a href="//getcarina.com">carina</a> and <a href="//github.com/jupyter/jupyterhub">jupyterhub</a> already, head stright
over to
<a href="https://github.com/betatim/carina-jupyterhub">carina-jupyterhub</a> for
the code.</p>
<h2>Got Carina?</h2>
<p><a href="//getcarina.com">Carina</a> is <em>an easy-to-use, instant on, native container
environment</em> made by <a href="http://www.rackspace.com/">rackspace</a>. With a few
clicks you can create a cluster and then launch <a href="//docker.com">docker</a>
containers on that cluster.</p>
<p>Once the cluster is running you interact with it via a docker
endpoint. Jupyterhub already has a mechanism for spawning notebooks
in docker containers so with a bit of hacking we can use a different
docker endpoint for each user.</p>
<h2>How do I use it?</h2>
<p>When users visit your jupyterhub instance they are greeted by a page
asking them to upload their carina credentials and type in a
username. The username is used to allow people to launch several
notebooks on one cluster if they wish. So maybe it should be a
notebook-name instead.</p>
<p>Once we have their credentials jupyterhub can launch the notebook
container on that cluster. Hook up a proxy route to it, et voila!</p>
<p>Sign up for a <a href="//getcarina.com">carina</a> account, download the credentials file for your cluster, and head on over to <a href="http://172.99.78.68:8000/hub/login">http://172.99.78.68:8000/hub/login</a> to give it a go.</p>
<h2>Why?</h2>
<p>I have been tinkering a lot recently with differnet approaches to
reusing and sharing research code. My current best idea is [project
everware][http://everware.xyz]: use a docker container to run your
research code and it becomes trivial for others to try it out without
ever having to install anything.</p>
<p>Everware provides a way for you to say "launch Tim's code in the cloud
and let me try it!". A very similar project is
<a href="//mybinder.org">binder</a>. The drawback of both is that the person
hosting the everware or binder instance has to provide all the
computing power. Which can be quite challenging if you use it for a
popular tutorial session, a notebook written by Peter Norvig, or an
analysis project based on LHC data.</p>
<p>All these require large amounts of computing, which is a nice way of
saying it costs a lot of money. So allowing your users to bring their
own computing power is pretty cool. Potentially your users already
have access to large amounts of computing via their university or
employer. In addition a lot of compute intensive research also
processes large amounts of data, so you want to run the computation
"close to" the data. Imagine having to transfer a few 100GB across the
network each time you launch your code.</p>
<p>In all these scenarios you want your users to be able to bring their
own computing power and privileges. <a href="https://github.com/betatim/carina-jupyterhub">carina-jupyterhub</a> is a first attempt at making this possible.</p>
<p><a href="http://172.99.78.68:8000">Try it</a>, <a href="https://github.com/betatim/carina-jupyterhub#fork-destination-box">fork it</a>, <a href="https://github.com/betatim/carina-jupyterhub/stargazers">star it</a>, tell me what is broken!</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

      </div>
    </div>

<div class="container">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <footer class="footer">
	<div class="social">
	    <a href="https://github.com/betatim"><i class="fa fa-github fa-2x"></i></a>
	    <a href="https://twitter.com/betatim"><i class="fa fa-twitter fa-2x"></i></a>
	    <a href="mailto:betatim@gmail.com"><i class="fa fa-envelope fa-2x"></i></a>
	</div>
	<div class="powered-by">
	  Copyright ©  2014-2016  - Tim Head - <a href="http://docs.getpelican.com/" target="_blank">Pelican</a> powered.
	</div>
      </footer>
    </div>
  </div>
</div>    
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/theme/js/bootstrap.min.js"></script>
  </body>
</html>